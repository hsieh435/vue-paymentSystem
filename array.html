<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MIX COLOR</title>
    <style>
      .squarearea {
        display: flex;
      }

      .basic {
        width: 300px;
        height: 300px;
        border: 1px solid black;
      }

      .square1,
      .square2,
      .square3 {
        margin: 10px;
        position: relative;
      }

      .buttonarea {
        display: flex;
        margin: 10px 0px 0px 0px;
      }

      .button {
        margin: 0px 30px 0px 30px;
      }

      .rect1,
      .rect2,
      .rect3 {
        font-size: 30px;
        text-transform: uppercase;
      }
    </style>
  </head>

  <body>
    <div class="squarearea">
      <div class="basic square1"></div>
      <div class="basic square2"></div>
      <div class="basic square3"></div>
    </div>
    <div class="buttonarea">
      <button class="button" onclick="changeColor1()">第一種顏色</button>
      <button class="button" onclick="changeColor2()">第二種顏色</button>
      <button class="button" onclick="mix()">混色</button>
      <button class="button" onclick="clean()">清除</button>
    </div>
    <p class="rect1">色碼：</p>
    <p class="rect2">色碼：</p>
    <p class="rect3">色碼：</p>

    <script>
      const square1 = document.querySelector(".square1");
      const square2 = document.querySelector(".square2");
      const square3 = document.querySelector(".square3");
      const rect1 = document.querySelector(".rect1");
      const rect2 = document.querySelector(".rect2");
      const rect3 = document.querySelector(".rect3");

      function changeColor1() {
        const num1 =
          "00000" + Math.floor(Math.random() * 16777216).toString(16);
        square1.style.backgroundColor = "#" + num1.slice(num1.length - 6);
        // rect1.innerHTML =
        //   "色碼：" +
        //   square1.style.backgroundColor +
        //   "\n" +
        //   "#" +
        //   num1.slice(num1.length - 6);
        rect1.innerHTML = `
          色碼：${square2.style.backgroundColor} # ${num1.slice(
          num1.length - 6
        )}`;
      }

      function changeColor2() {
        const num1 =
          "00000" + Math.floor(Math.random() * 16777216).toString(16);
        square2.style.backgroundColor = "#" + num1.slice(num1.length - 6);
        // rect2.innerHTML =
        //   "色碼：" +
        //   square2.style.backgroundColor +
        //   "\n" +
        //   "#" +
        //   num1.slice(num1.length - 6);
        rect2.innerHTML = `
          色碼：${square2.style.backgroundColor} # ${num1.slice(
          num1.length - 6
        )}`;
      }

      function mix() {
        const color1 = square1.style.backgroundColor.split(/[.,(,)]/);
        const color2 = square2.style.backgroundColor.split(/[.,(,)]/);

        let r = Math.ceil((color1[1] * 1 * (color2[1] * 1)) / 255);
        let g = Math.ceil((color1[2] * 1 * (color2[2] * 1)) / 255);
        let b = Math.ceil((color1[3] * 1 * (color2[3] * 1)) / 255);

        square3.style.backgroundColor = "RGB(" + r + "," + g + "," + b + ")";
        // rect3.innerHTML =
        //   "色碼：" +
        //   square3.style.backgroundColor +
        //   "\n" +
        //   "#" +
        //   r.toString(16) +
        //   g.toString(16) +
        //   b.toString(16);
        rect3.innerHTML = `色碼：${
          square3.style.backgroundColor
        } # ${r.toString(16)}${g.toString(16)}${b.toString(16)}`;
      }

      function clean() {
        const rect1 = document.querySelector(".rect1");
        const rect2 = document.querySelector(".rect2");
        const rect3 = document.querySelector(".rect3");
        square1.style.backgroundColor = "#ffffff";
        square2.style.backgroundColor = "#ffffff";
        square3.style.backgroundColor = "#ffffff";
        rect1.innerHTML = "色碼：";
        rect2.innerHTML = "色碼：";
        rect3.innerHTML = "色碼：";
      }
    </script>
  </body>
</html>
